{"version":3,"file":"js/Overview.1660843226439.1396347ff848f079c1db.js","mappings":"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","sources":["webpack:///./src/api/index.js","webpack:///./src/Utilities/overviewRows.js","webpack:///./src/routes/Overview.js","webpack:///./src/store/actions.js"],"sourcesContent":["import { versionMapper, DEFAULT_PREFIX } from './constants';\nimport instance from '@redhat-cloud-services/frontend-components-utilities/interceptors';\nimport { load } from 'js-yaml';\nexport { default as instance } from '@redhat-cloud-services/frontend-components-utilities/interceptors';\n\nexport const apiList = () => {\n  return instance.get(`/${DEFAULT_PREFIX}`);\n};\n\nexport const generateUrl = (appName, appVersion) =>\n  `/${DEFAULT_PREFIX}/${appName}/${appVersion}/openapi.json`;\n\nexport const activeApi = () =>\n  instance\n    .get(`${insights.chrome.isBeta() ? '/beta' : ''}/config/main.yml`)\n    .then((data) => load(data))\n    .then((data) => ({\n      services: Object.keys(data)\n        .filter((oneAppKey) => data[oneAppKey].api)\n        .map((oneAppKey) => ({\n          appName: oneAppKey,\n          ...data[oneAppKey],\n        })),\n    }));\n\nexport const getSpec = (url, isGithub) => {\n  const spec = instance.get(url);\n  if (isGithub) {\n    return spec.then(({ content }) => load(Buffer.from(content, 'base64')));\n  }\n\n  return spec;\n};\n\nexport const isValidGithub = ({ owner, repo, content } = {}) => {\n  return owner && repo && content;\n};\n\nexport const oneApi = ({ name, version = 'v1', url: defaultUrl, github }) => {\n  const url = isValidGithub(github)\n    ? `https://api.github.com/repos/${github.owner}/${github.repo}/contents/${github.content}`\n    : defaultUrl ?? generateUrl(name, versionMapper[name] || version);\n  const spec = getSpec(url, isValidGithub(github));\n  return spec.then((data) => ({\n    ...data,\n    latest: url,\n    name,\n    servers: [\n      ...(data.servers || []),\n      { url: `/api/${name}/${versionMapper[name] || version}` },\n    ]\n      .filter(\n        (server, key, array) =>\n          array.findIndex(\n            ({ url }) =>\n              `${location.origin}${server.url}`.indexOf(url) === 0 ||\n              server.url.indexOf(url) === 0\n          ) === key\n      )\n      .map((server) => ({\n        ...server,\n        url:\n          server.url.indexOf('/') === 0\n            ? `${location.origin}${server.url}`\n            : server.url,\n      })),\n  }));\n};\n","import React, { Fragment } from 'react';\nimport {\n  Badge,\n  Bullseye,\n  Button,\n  EmptyState,\n  Title,\n  EmptyStateBody,\n  EmptyStateVariant,\n} from '@patternfly/react-core';\nimport { Link } from 'react-router-dom';\nimport {\n  cellWidth,\n  nowrap,\n  sortable,\n  SortByDirection,\n} from '@patternfly/react-table';\nimport { EmptyTable } from '@redhat-cloud-services/frontend-components/EmptyTable';\nimport { ExportIcon, ExternalLinkSquareAltIcon } from '@patternfly/react-icons';\nimport { oneApi } from '../api';\nimport fileDownload from 'js-file-download';\nimport JSZip from 'jszip';\nimport flatten from 'lodash/flatten';\nimport { treeTable } from '@redhat-cloud-services/frontend-components/TreeTable';\n\nconst indexToKey = ['', 'title', 'appName', 'version']; // pf indexes from 1 not 0\n\nexport const columns = (onSetRows) => [\n  {\n    title: 'Application name',\n    transforms: [sortable],\n    cellTransforms: [treeTable(onSetRows)],\n  },\n  { title: 'API endpoint', transforms: [nowrap, sortable, cellWidth(10)] },\n  { title: 'API version', transforms: [nowrap, sortable, cellWidth(10)] },\n  { title: 'Download', transforms: [cellWidth(10)] },\n];\n\nconst constructParams = (url, github, config) => {\n  const params = new URLSearchParams();\n  url && params.set('url', url);\n  if (github) {\n    params.set('github-owner', github.owner);\n    params.set('github-repo', github.repo);\n    params.set('github-content', github.path);\n  }\n  Object.entries(config).forEach(([key, value]) => {\n    value && params.set(key, value);\n  });\n  return params.toString();\n};\n\nexport const rowMapper = (\n  title,\n  versions,\n  url,\n  github,\n  selectedRows = [],\n  apiName,\n  config\n) => ({\n  selected: selectedRows?.[title]?.isSelected,\n  cells: [\n    {\n      title: (\n        <Fragment>\n          {versions || url || github ? (\n            <Link\n              to={`/${apiName}${\n                versions && versions[0] && versions[0] !== 'v1'\n                  ? `/${versions[0]}`\n                  : ''\n              }${\n                url || github || Object.values(config).length > 0 ? '?' : ''\n              }${constructParams(url, github, config)}`}\n            >\n              {title}\n            </Link>\n          ) : (\n            title\n          )}\n        </Fragment>\n      ),\n      value: title,\n      props: {\n        value: title,\n        'data-position': 'title',\n      },\n    },\n    versions\n      ? `/api/${apiName}`\n      : url\n      ? {\n          title: (\n            <span className=\"ins-c-docs__url\">\n              {url.replace(/openapi$/, '').replace(/^http(?:s):\\/\\//, '')}\n            </span>\n          ),\n          props: {\n            colSpan: 2,\n          },\n          value: url,\n        }\n      : github\n      ? {\n          title: (\n            <Fragment>\n              <Button\n                variant=\"link\"\n                isInline\n                component=\"a\"\n                icon={<ExternalLinkSquareAltIcon />}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                iconPosition=\"right\"\n                href={`https://github.com/${github.owner}/${github.repo}`}\n              >\n                {github.owner}/{github.repo}\n              </Button>\n            </Fragment>\n          ),\n          props: {\n            colSpan: 2,\n          },\n          value: github,\n        }\n      : '',\n    ...(!url && !github\n      ? [\n          {\n            title: (\n              <Fragment>\n                {versions?.map?.((version) => (\n                  <Link key={version} to={`/${apiName}/${version}`}>\n                    <Badge>{version}</Badge>\n                  </Link>\n                ))}\n              </Fragment>\n            ),\n            value: versions,\n          },\n        ]\n      : []),\n    {\n      title: (\n        <Button\n          variant=\"plain\"\n          onClick={() => downloadFile(apiName, versions?.[0], url, github)}\n        >\n          {' '}\n          <ExportIcon />{' '}\n        </Button>\n      ),\n    },\n  ],\n});\n\nexport const emptyTable = [\n  {\n    cells: [\n      {\n        title: (\n          <EmptyTable>\n            <Bullseye>\n              <EmptyState variant={EmptyStateVariant.full}>\n                <Title headingLevel=\"h5\" size=\"lg\">\n                  No matching rules found\n                </Title>\n                <EmptyStateBody>\n                  This filter criteria matches no rules. <br /> Try changing\n                  your filter settings.\n                </EmptyStateBody>\n              </EmptyState>\n            </Bullseye>\n          </EmptyTable>\n        ),\n        props: {\n          colSpan: 4,\n        },\n      },\n    ],\n  },\n];\n\nexport function sortRows(curr, next, key = 'title', isDesc) {\n  const getSortKey = (obj) =>\n    key === 'appName' && obj.apiName ? 'apiName' : key;\n  return isDesc\n    ? next[getSortKey(next)]?.localeCompare(curr[getSortKey(curr)], 'en', {\n        sensitivity: 'base',\n      })\n    : curr[getSortKey(curr)]?.localeCompare(next[getSortKey(next)], 'en', {\n        sensitivity: 'base',\n      });\n}\n\nexport function buildRows(\n  sortBy,\n  { page, perPage },\n  rows,\n  selectedRows,\n  openedRows\n) {\n  if (rows.length > 0) {\n    return rows\n      .sort((curr, next) =>\n        sortRows(\n          curr,\n          next,\n          indexToKey[sortBy.index],\n          sortBy.direction === SortByDirection.desc\n        )\n      )\n      .slice((page - 1) * perPage, page * perPage)\n      .map(({ frontend, title, appName, version, apiName, api }, index) => [\n        {\n          ...rowMapper(\n            title,\n            api.versions,\n            api.url,\n            api.github,\n            selectedRows,\n            apiName || appName,\n            { readonly: api.readonly }\n          ),\n          ...(api.subItems && {\n            isTreeOpen: openedRows?.includes?.(\n              (frontend && frontend.title) || title\n            ),\n            subItems: api.subItems,\n          }),\n          noDetail: !version && !api.url && !api.github,\n        },\n        ...(api.subItems\n          ? Object.entries(api.subItems).map(\n              ([key, { title, versions, url, apiName, github, readonly }]) => ({\n                ...rowMapper(\n                  title,\n                  versions,\n                  url,\n                  github,\n                  selectedRows,\n                  apiName || key,\n                  { readonly }\n                ),\n                treeParent: index,\n              })\n            )\n          : []),\n      ])\n      .flat();\n  }\n\n  return emptyTable;\n}\n\nexport function filterRows(row, filter) {\n  const restFilterValues = [\n    row.frontend?.title,\n    ...(row.frontend?.paths || []),\n    // eslint-disable-next-line camelcase\n    ...(row.frontend?.sub_apps?.reduce(\n      (acc, curr) => [...acc, curr.title, curr.id],\n      []\n    ) || []),\n    row.api?.apiName,\n  ].filter(Boolean);\n  return (\n    indexToKey.some(\n      (key) =>\n        row[key] &&\n        row[key].toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1\n    ) ||\n    restFilterValues.some(\n      (value) =>\n        value.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1\n    )\n  );\n}\n\nexport function downloadFile(appName, appVersion, url, github) {\n  oneApi({\n    name: appName,\n    version: appVersion,\n    url,\n    github: { ...github, content: github.path },\n  }).then((data) => {\n    delete data.latest;\n    delete data.name;\n    fileDownload(JSON.stringify(data), `${appName}-openapi.json`);\n  });\n}\n\nexport function multiDownload(selectedRows = {}, onError) {\n  const zip = new JSZip();\n  const allFiles = Object.values(selectedRows)\n    .filter(({ isSelected }) => isSelected)\n    .map(({ appName, version, apiName, subItems, url, github }) => {\n      if (subItems) {\n        return Object.entries(subItems).map(\n          ([key, { versions, url, github }]) =>\n            oneApi({ name: key, version: versions?.[0], url, github }).catch(\n              () =>\n                onError(\n                  `API ${key} with version ${versions[0]} not found or broken.`\n                )\n            )\n        );\n      } else {\n        return oneApi({ name: apiName || appName, version, url, github }).catch(\n          () =>\n            onError(\n              `API ${\n                apiName || appName\n              } with version ${version} not found or broken.`\n            )\n        );\n      }\n    });\n\n  Promise.all(flatten(allFiles)).then((files) => {\n    if (files && files.length > 1) {\n      files.map(({ name, ...file } = {}) => {\n        if (name) {\n          delete file.latest;\n          zip.file(`${name}-openapi.json`, JSON.stringify(file));\n        }\n      });\n      zip\n        .generateAsync({ type: 'blob' })\n        .then((content) => fileDownload(content, `cloud-services-openapi.zip`));\n    } else if (files && files.length === 1) {\n      const { name, ...file } = files[0] || {};\n      if (name) {\n        delete file.latest;\n        fileDownload(JSON.stringify(file), `${name}-openapi.json`);\n      }\n    }\n  });\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\n\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { SkeletonTable } from '@redhat-cloud-services/frontend-components/SkeletonTable';\nimport TableToolbar from '@redhat-cloud-services/frontend-components/TableToolbar';\nimport PrimaryToolbar from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport {\n  TreeRowWrapper,\n  sizeCalculator,\n} from '@redhat-cloud-services/frontend-components/TreeTable';\nimport { Pagination } from '@patternfly/react-core';\nimport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableVariant,\n} from '@patternfly/react-table';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { onLoadApis, onSelectRow } from '../store/actions';\nimport {\n  filterRows,\n  buildRows,\n  columns,\n  multiDownload,\n} from '../Utilities/overviewRows';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux';\n\nconst isNotSelected = ({ selectedRows }) => {\n  return (\n    !selectedRows ||\n    Object.values(selectedRows || {})\n      .map(({ isSelected }) => isSelected)\n      .filter(Boolean).length === 0\n  );\n};\n\nconst Overview = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(onLoadApis());\n  }, []);\n  const loaded = useSelector(({ services: { loaded } }) => loaded);\n  const selectedRows = useSelector(\n    ({ services: { selectedRows } }) => selectedRows\n  );\n  const endpoints = useSelector(\n    ({ services: { endpoints } }) => endpoints || []\n  );\n  const [openedRows, setOpenedRows] = useState([]);\n  const [sortBy, onSortBy] = useState({});\n  const [pageSettings, onPaginate] = useState({\n    perPage: 50,\n    page: 1,\n  });\n  const [filter, onChangeFilter] = useState('');\n  const filtered = filter && endpoints.filter((row) => filterRows(row, filter));\n  const rows = loaded\n    ? buildRows(\n        sortBy,\n        pageSettings,\n        filtered || endpoints,\n        selectedRows,\n        openedRows\n      )\n    : [];\n  const onSetRows = (_e, { props: { value } }) => {\n    if (openedRows.includes(value)) {\n      setOpenedRows(() => openedRows.filter((opened) => opened !== value));\n    } else {\n      setOpenedRows(() => [...openedRows, value]);\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <PageHeader className=\"pf-m-light\">\n        <PageHeaderTitle title=\"API documentation\" />\n      </PageHeader>\n      <Main className=\"ins-c-docs__api\">\n        <React.Fragment>\n          <PrimaryToolbar\n            filterConfig={{\n              items: [\n                {\n                  label: 'Filter by application name',\n                  type: 'text',\n                  filterValues: {\n                    id: 'filter-by-string',\n                    key: 'filter-by-string',\n                    placeholder: 'Filter by application name',\n                    value: filter,\n                    onChange: (_e, value) => {\n                      onPaginate({\n                        ...pageSettings,\n                        page: 1,\n                      });\n                      onChangeFilter(value);\n                    },\n                    isDisabled: !loaded,\n                  },\n                },\n              ],\n            }}\n            actionsConfig={{\n              actions: [\n                {\n                  label: 'Download selected',\n                  props: {\n                    isDisabled: isNotSelected({ selectedRows }),\n                    onClick: () =>\n                      multiDownload(selectedRows, (error) =>\n                        dispatch(\n                          addNotification({\n                            variant: 'danger',\n                            title: 'Server error',\n                            description: error,\n                            dismissable: true,\n                          })\n                        )\n                      ),\n                  },\n                },\n              ],\n            }}\n            {...(loaded && {\n              pagination: {\n                ...pageSettings,\n                itemCount: (filtered || endpoints).length,\n                onSetPage: (_e, page) =>\n                  onPaginate({\n                    ...pageSettings,\n                    page,\n                  }),\n                onPerPageSelect: (_event, perPage) =>\n                  onPaginate({\n                    ...pageSettings,\n                    perPage,\n                  }),\n              },\n            })}\n            {...(filter.length > 0 && {\n              activeFiltersConfig: {\n                filters: [\n                  {\n                    name: filter,\n                  },\n                ],\n                onDelete: () => {\n                  onPaginate({\n                    ...pageSettings,\n                    page: 1,\n                  });\n                  onChangeFilter('');\n                },\n              },\n            })}\n          />\n          {loaded ? (\n            <Table\n              className=\"pf-m-expandable pf-c-treeview\"\n              aria-label=\"Sortable Table\"\n              variant={TableVariant.compact}\n              sortBy={sortBy}\n              onSort={(_e, index, direction) => onSortBy({ index, direction })}\n              cells={columns(onSetRows)}\n              rows={sizeCalculator(rows)}\n              rowWrapper={TreeRowWrapper}\n              {...((filtered || endpoints).length > 0 && {\n                onSelect: (_e, isSelected, rowKey) => {\n                  if (rowKey === -1) {\n                    dispatch(onSelectRow({ isSelected, row: rows }));\n                  } else {\n                    dispatch(onSelectRow({ isSelected, row: rows[rowKey] }));\n                  }\n                },\n              })}\n            >\n              <TableHeader />\n              <TableBody />\n            </Table>\n          ) : (\n            <SkeletonTable columns={columns} rowSize={28} />\n          )}\n        </React.Fragment>\n        <TableToolbar isFooter>\n          {loaded ? (\n            <Pagination\n              variant=\"bottom\"\n              dropDirection=\"up\"\n              itemCount={(filtered || endpoints).length}\n              perPage={pageSettings.perPage}\n              page={pageSettings.page}\n              onSetPage={(_e, page) =>\n                onPaginate({\n                  ...pageSettings,\n                  page,\n                })\n              }\n              onPerPageSelect={(_event, perPage) =>\n                onPaginate({\n                  ...pageSettings,\n                  perPage,\n                })\n              }\n            />\n          ) : (\n            `loading`\n          )}\n        </TableToolbar>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default Overview;\n","import { LOAD_ALL, LOAD_ONE_API, SELECT_ROW } from './actionTypes';\nimport { activeApi, oneApi } from '../api';\n\nexport const onLoadApis = () => ({\n  type: LOAD_ALL,\n  payload: activeApi(),\n});\n\nexport const onLoadOneApi = (data) => ({\n  type: LOAD_ONE_API,\n  payload: oneApi(data),\n});\n\nexport const onSelectRow = (data) => ({\n  type: SELECT_ROW,\n  payload: data,\n});\n"],"names":["activeApi","instance","insights","chrome","isBeta","then","data","load","services","Object","keys","filter","oneAppKey","api","map","appName","isValidGithub","owner","repo","content","oneApi","appVersion","name","version","defaultUrl","url","github","versionMapper","DEFAULT_PREFIX","spec","isGithub","Buffer","from","getSpec","latest","servers","server","key","array","findIndex","location","origin","indexOf","indexToKey","columns","onSetRows","title","transforms","sortable","cellTransforms","treeTable","nowrap","cellWidth","constructParams","config","params","URLSearchParams","set","path","entries","forEach","value","toString","rowMapper","versions","selectedRows","apiName","selected","isSelected","cells","Fragment","Link","to","values","length","props","className","replace","colSpan","Button","variant","isInline","component","icon","target","rel","iconPosition","href","Badge","onClick","downloadFile","emptyTable","EmptyTable","Bullseye","EmptyState","EmptyStateVariant","Title","headingLevel","size","EmptyStateBody","fileDownload","JSON","stringify","isNotSelected","Boolean","dispatch","useDispatch","useEffect","onLoadApis","loaded","useSelector","endpoints","useState","openedRows","setOpenedRows","sortBy","onSortBy","perPage","page","pageSettings","onPaginate","onChangeFilter","filtered","row","restFilterValues","frontend","paths","sub_apps","reduce","acc","curr","id","some","toLocaleLowerCase","filterRows","rows","sort","next","getSortKey","obj","localeCompare","sensitivity","sortRows","index","direction","SortByDirection","slice","readonly","subItems","isTreeOpen","includes","noDetail","treeParent","flat","buildRows","PageHeader","PageHeaderTitle","Main","PrimaryToolbar","filterConfig","items","label","type","filterValues","placeholder","onChange","_e","isDisabled","actionsConfig","actions","onError","zip","JSZip","allFiles","catch","Promise","all","flatten","files","file","generateAsync","multiDownload","error","addNotification","description","dismissable","pagination","itemCount","onSetPage","onPerPageSelect","_event","activeFiltersConfig","filters","onDelete","Table","TableVariant","onSort","opened","sizeCalculator","rowWrapper","TreeRowWrapper","onSelect","rowKey","onSelectRow","TableHeader","TableBody","SkeletonTable","rowSize","TableToolbar","isFooter","Pagination","dropDirection","LOAD_ALL","payload","onLoadOneApi","LOAD_ONE_API","SELECT_ROW"],"sourceRoot":""}