"use strict";(self.webpackChunkapiDocs=self.webpackChunkapiDocs||[]).push([[474],{24053:(e,t,n)=>{n.d(t,{W:()=>r});var r="/docs/api"},66702:(e,t,n)=>{n.d(t,{Ux:()=>p,w0:()=>v});var r=n(42982),o=n(4942),i=n(6407),a=n(33366),c=n(47180),l=n(48764).lW;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e,t){return a.ZP.get("/api/chrome-service/v1/static/".concat(e?"beta":"stable","/").concat(t?"prod":"stage","/main.yml")).then((function(e){return(0,c.zD)(e)})).then((function(e){return{services:Object.keys(e).filter((function(t){return e[t].api})).map((function(t){return s({appName:t},e[t])}))}}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.owner,n=e.repo,r=e.content;return t&&n&&r},v=function(e){var t,n,o=e.name,u=e.version,p=void 0===u?"v1":u,v=e.url,d=e.github,m=f(d)?"https://api.github.com/repos/".concat(d.owner,"/").concat(d.repo,"/contents/").concat(d.content):null!=v?v:(t=o,n=i.u[o]||p,"/".concat(i.K,"/").concat(t,"/").concat(n,"/openapi.json")),b=function(e,t){var n=a.ZP.get(e);return t?n.then((function(e){var t=e.content;return(0,c.zD)(l.from(t,"base64"))})):n}(m,f(d));return b.then((function(e){return s(s({},e),{},{latest:m,name:o,servers:[].concat((0,r.Z)(e.servers||[]),[{url:"/api/".concat(o,"/").concat(i.u[o]||p)}]).filter((function(e,t,n){return n.findIndex((function(t){var n=t.url;return 0==="".concat(location.origin).concat(e.url).indexOf(n)||0===e.url.indexOf(n)}))===t})).map((function(e){return s(s({},e),{},{url:0===e.url.indexOf("/")?"".concat(location.origin).concat(e.url):e.url})}))})}))}},63947:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(87462),o=n(4942),i=n(42982),a=n(70885),c=n(92950),l=n.n(c),u=n(80123),s=n(39173),p=n(55140),f=n(14748),v=n(81739),d=n(65550),m=n(48682),b=n(21242),g=n(13678),h=n(86706),O=n(94778),y=n(45987),w=n(83044),j=n(58247),P=n(1657),S=n(83567),E=n(66702),Z=n(35823),k=n.n(Z),D=n(55733),I=n.n(D),C=n(85564),N=n.n(C),x=n(24053),L=["name"],T=["name"];function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=["","title","appName","version"],W=function(e,t){return[{title:"Application name",transforms:[g.sortable],cellTransforms:(0,i.Z)(e?[(0,g.treeRow)(e,t)]:[])},{title:"API endpoint",transforms:[g.nowrap,g.sortable,(0,g.cellWidth)(10)]},{title:"API version",transforms:[g.nowrap,g.sortable,(0,g.cellWidth)(10)]},{title:"Download",transforms:[(0,g.cellWidth)(10)]}]},z=function(e,t,n){var r=new URLSearchParams;return e&&r.set("url",e),t&&(r.set("github-owner",t.owner),r.set("github-repo",t.repo),r.set("github-content",t.path)),Object.entries(n).forEach((function(e){var t=(0,a.Z)(e,2),n=t[0],o=t[1];o&&r.set(n,o)})),r.toString()},_=function(e,t,n,r){var o,a,u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],p=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0;return{selected:(null==s||null===(o=s[e])||void 0===o?void 0:o.isSelected)||(null==s||null===(a=s["parent-".concat(e)])||void 0===a?void 0:a.isSelected),cells:[{title:l().createElement(c.Fragment,null,t||n||r?l().createElement(w.Link,{to:"".concat(x.W,"/").concat(p).concat(t&&t[0]&&"v1"!==t[0]?"/".concat(t[0]):"").concat(n||r||Object.values(f).length>0?"?":"").concat(z(n,r,f))},e):e),value:e,props:{value:e,"data-position":"title"}},t?"/api/".concat(p):n?{title:l().createElement("span",{className:"ins-c-docs__url"},n.replace(/openapi$/,"").replace(/^http(?:s):\/\//,"")),props:{colSpan:2},value:n}:r?{title:l().createElement(c.Fragment,null,l().createElement(b.Button,{variant:"link",isInline:!0,component:"a",icon:l().createElement(S.ZP,null),target:"_blank",rel:"noopener noreferrer",iconPosition:"right",href:"https://github.com/".concat(r.owner,"/").concat(r.repo)},r.owner,"/",r.repo)),props:{colSpan:2},value:r}:""].concat((0,i.Z)(n||r?[]:[{title:l().createElement(c.Fragment,null,null==t||null===(u=t.map)||void 0===u?void 0:u.call(t,(function(e){return l().createElement(w.Link,{key:e,to:"".concat(x.W,"/").concat(p,"/").concat(e)},l().createElement(b.Badge,null,e))}))),value:t}]),[{title:l().createElement(b.Button,{variant:"plain",onClick:function(){return function(e,t,n,r){(0,E.w0)({name:e,version:t,url:n,github:F(F({},r),{},{content:null==r?void 0:r.path})}).then((function(t){delete t.latest,delete t.name,k()(JSON.stringify(t),"".concat(e,"-openapi.json"))}))}(p,null==t?void 0:t[0],n,r)}}," ",l().createElement(P.ZP,null)," ")}])}},R=[{cells:[{title:l().createElement(j.Z,null,l().createElement(b.Bullseye,null,l().createElement(b.EmptyState,{variant:b.EmptyStateVariant.full},l().createElement(b.Title,{headingLevel:"h5",size:"lg"},"No matching rules found"),l().createElement(b.EmptyStateBody,null,"This filter criteria matches no rules. ",l().createElement("br",null)," Try changing your filter settings.")))),props:{colSpan:4}}]}],H=n(83215);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.selectedRows;return!t||0===Object.values(t||{}).map((function(e){return e.isSelected})).filter(Boolean).length},K=function(e,t){var n,r,o,i;return arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&0!==Object.keys(e).length?null===(o=(i=Object.values(t)).every)||void 0===o?void 0:o.call(i,(function(t){var n=t.title;return Object.entries(e).find((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1].isSelected;return n===r&&o}))})):null===(n=(r=Object.values(t)).some)||void 0===n?void 0:n.call(r,(function(t){var n=t.title;return Object.entries(e).find((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1].isSelected;return n===r&&o}))}))};const M=function(){var e=(0,p.Z)(),t=e.isBeta,n=e.isProd,o=(0,h.I0)();(0,c.useEffect)((function(){o((0,O.j3)(t(),n()))}),[]);var w=(0,h.v9)((function(e){return e.services.loaded})),j=(0,h.v9)((function(e){return e.services.selectedRows})),P=(0,h.v9)((function(e){return e.services.endpoints||[]})),S=(0,c.useState)([]),Z=(0,a.Z)(S,2),D=Z[0],C=Z[1],x=(0,c.useState)({}),B=(0,a.Z)(x,2),z=B[0],J=B[1],M=(0,c.useState)({perPage:50,page:1}),Q=(0,a.Z)(M,2),$=Q[0],q=Q[1],G=(0,c.useState)(""),X=(0,a.Z)(G,2),Y=X[0],ee=X[1],te=Y&&P.filter((function(e){return function(e,t){var n,r,o,a,c,l=[null===(n=e.frontend)||void 0===n?void 0:n.title].concat((0,i.Z)((null===(r=e.frontend)||void 0===r?void 0:r.paths)||[]),(0,i.Z)((null===(o=e.frontend)||void 0===o||null===(a=o.sub_apps)||void 0===a?void 0:a.reduce((function(e,t){return[].concat((0,i.Z)(e),[t.title,t.id])}),[]))||[]),[null===(c=e.api)||void 0===c?void 0:c.apiName]).filter(Boolean);return A.some((function(n){return e[n]&&-1!==e[n].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))||l.some((function(e){return-1!==e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))}(e,Y)})),ne=w?function(e,t,n,r,o){var c=t.page,l=t.perPage;if(n.length>0){var u=0;return n.sort((function(t,n){return function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",i=function(e){return"appName"===o&&e.apiName?"apiName":o};return(arguments.length>3?arguments[3]:void 0)?null===(n=t[i(t)])||void 0===n?void 0:n.localeCompare(e[i(e)],"en",{sensitivity:"base"}):null===(r=e[i(e)])||void 0===r?void 0:r.localeCompare(t[i(t)],"en",{sensitivity:"base"})}(t,n,A[e.index],e.direction===g.SortByDirection.desc)})).slice((c-1)*l,c*l).map((function(e,t){var n,c=e.frontend,l=e.title,s=e.appName,p=e.version,f=e.apiName,v=e.api,d=[F(F(F({},_(l,v.versions,v.url,v.github,r,f||s,{readonly:v.readonly})),v.subItems&&{isTreeOpen:null==o||null===(n=o.includes)||void 0===n?void 0:n.call(o,c&&c.title||l),subItems:v.subItems}),{},{noDetail:!p&&!v.url&&!v.github,posinset:t+1})].concat((0,i.Z)(v.subItems?Object.entries(v.subItems).map((function(e,t){var n=(0,a.Z)(e,2),o=n[0],i=n[1],c=i.title,l=i.versions,s=i.url,p=i.apiName,f=i.github,v=i.readonly;return F(F({},_(c,l,s,f,r,p||o,{readonly:v})),{},{treeParent:u,posinset:t+1})})):[]));return u+=v.subItems?Object.keys(v.subItems).length+1:1,d})).flat()}return R}(z,$,te||P,j,D):[],re=ne.map((function(e){var t,n=null===(t=e.cells[0])||void 0===t?void 0:t.value,r={isChecked:e.selected,isExpanded:D.includes(n),value:n,"aria-setsize":Object.keys(e.subItems||{}).length,"aria-posinset":e.posinset,"aria-level":1};if(Object.prototype.hasOwnProperty.call(e,"treeParent")){var o,i,a=ne[e.treeParent];r["aria-level"]=2,r.isHidden=!D.includes(null==a||null===(o=a.cells)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.value),r.isChecked=e.selected||a.selected}return!e.selected&&Object.prototype.hasOwnProperty.call(e,"subItems")&&(K(j,e.subItems,!0)?r.isChecked=!0:K(j,e.subItems)&&(r.isChecked=null)),U(U({},e),{},{props:r})}));return l().createElement(l().Fragment,null,l().createElement(u.Z,{className:"pf-m-light"},l().createElement(s.Z,{title:"API documentation"})),l().createElement(f.Z,{className:"ins-c-docs__api"},l().createElement(l().Fragment,null,l().createElement(m.Z,(0,r.Z)({filterConfig:{items:[{label:"Filter by application name",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Filter by application name",value:Y,onChange:function(e,t){q(U(U({},$),{},{page:1})),ee(t)},isDisabled:!w}}]},actionsConfig:{actions:[{label:"Download selected",props:{isDisabled:V({selectedRows:j}),onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new(I()),r=Object.values(e).filter((function(e){return e.isSelected})).map((function(e){var n=e.appName,r=e.version,o=e.apiName,i=e.subItems,c=e.url,l=e.github;return i?Object.entries(i).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1],i=o.versions,c=o.url,l=o.github;return(0,E.w0)({name:r,version:null==i?void 0:i[0],url:c,github:l}).catch((function(){return t("API ".concat(r," with version ").concat(i[0]," not found or broken."))}))})):(0,E.w0)({name:o||n,version:r,url:c,github:l}).catch((function(){return t("API ".concat(o||n," with version ").concat(r," not found or broken."))}))}));Promise.all(N()(r)).then((function(e){if(e&&e.length>1)e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=(0,y.Z)(e,L);t&&(delete r.latest,n.file("".concat(t,"-openapi.json"),JSON.stringify(r)))})),n.generateAsync({type:"blob"}).then((function(e){return k()(e,"cloud-services-openapi.zip")}));else if(e&&1===e.length){var t=e[0]||{},r=t.name,o=(0,y.Z)(t,T);r&&(delete o.latest,k()(JSON.stringify(o),"".concat(r,"-openapi.json")))}}))}(j,(function(e){return o((0,H.wN)({variant:"danger",title:"Server error",description:e,dismissable:!0}))}))}}}]}},w&&{pagination:U(U({},$),{},{itemCount:(te||P).length,onSetPage:function(e,t){return q(U(U({},$),{},{page:t}))},onPerPageSelect:function(e,t){return q(U(U({},$),{},{perPage:t}))}})},Y.length>0&&{activeFiltersConfig:{filters:[{name:Y}],onDelete:function(){q(U(U({},$),{},{page:1})),ee("")}}})),w?l().createElement(g.Table,{isTreeTable:!0,className:"pf-m-expandable pf-c-treeview","aria-label":"Sortable Table",canSelectAll:!1,variant:g.TableVariant.compact,sortBy:z,onSort:function(e,t,n){return J({index:t,direction:n})},cells:W((function(e,t,n,r){var o=r.props.value;D.includes(o)?C((function(){return D.filter((function(e){return e!==o}))})):C((function(){return[].concat((0,i.Z)(D),[o])}))}),(function(e,t,n){var r=re[n];!t&&Object.prototype.hasOwnProperty.call(r,"subItems")&&o((0,O.wS)({isSelected:t,row:re.filter((function(e){var t=e.props.value;return Object.values(r.subItems).find((function(e){return e.title===t}))}))})),o((0,O.wS)({isSelected:t,row:r}))})),rows:re},l().createElement(g.TableHeader,null),l().createElement(g.TableBody,null)):l().createElement(v.Z,{columns:W(),rowSize:28})),l().createElement(d.Z,{isFooter:!0},w?l().createElement(b.Pagination,{variant:"bottom",dropDirection:"up",itemCount:(te||P).length,perPage:$.perPage,page:$.page,onSetPage:function(e,t){return q(U(U({},$),{},{page:t}))},onPerPageSelect:function(e,t){return q(U(U({},$),{},{perPage:t}))}}):"loading")))}},94778:(e,t,n)=>{n.d(t,{IQ:()=>a,j3:()=>i,wS:()=>c});var r=n(49120),o=n(66702),i=function(e,t){return{type:r.Lh,payload:(0,o.Ux)(e,t)}},a=function(e){return{type:r.a,payload:(0,o.w0)(e)}},c=function(e){return{type:r.HM,payload:e}}}}]);
//# sourceMappingURL=../sourcemaps/Overview.05c1538dc9fd9a0ea1c50cffd595227f.js.map