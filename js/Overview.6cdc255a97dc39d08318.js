(self.webpackChunkapiDocs=self.webpackChunkapiDocs||[]).push([[4474,5467],{12405:(e,t,n)=>{"use strict";n.d(t,{W:()=>a});const a="/docs/api"},34172:(e,t,n)=>{"use strict";n.d(t,{Ux:()=>i,w0:()=>c});var a=n(12060),l=n(33366),s=n(47180),r=n(48764).lW;const i=(e,t)=>l.ZP.get(`/api/chrome-service/v1/static/${e?"beta":"stable"}/${t?"prod":"stage"}/main.yml`).then((e=>(0,s.zD)(e))).then((e=>({services:Object.keys(e).filter((t=>e[t].api)).map((t=>({appName:t,...e[t]})))}))),o=(e={})=>!!(e.owner&&e.repo&&e.content),c=({name:e,version:t="v1",url:n,github:i})=>{const c=o(i)?`https://api.github.com/repos/${i.owner}/${i.repo}/contents/${i.content}`:n??(p=e,u=a.u[e]||t,`/${a.K}/${p}/${u}/openapi.json`);var p,u;const m=((e,t)=>{const n=l.ZP.get(e);return t?n.then((({content:e})=>(0,s.zD)(r.from(e,"base64").toString("utf-8")))):n})(c,o(i));return m.then((n=>({...n,latest:c,name:e,servers:[...n.servers||[],{url:`/api/${e}/${a.u[e]||t}`}].filter(((e,t,n)=>n.findIndex((({url:t})=>0===`${location.origin}${e.url}`.indexOf(t)||0===e.url.indexOf(t)))===t)).map((e=>({...e,url:0===e.url.indexOf("/")?`${location.origin}${e.url}`:e.url})))})))}},30607:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var a=n(28416),l=n.n(a),s=n(63456),r=n(39173),i=n(55140),o=n(99087),c=n(22262),p=n(15433),u=n(31611),m=n(93297),d=n(75863),g=n(59023),b=n(49004),f=n(58027),v=n(86706),h=n(83471),y=n(93595),w=n(74503),$=n(31055),E=n(95376),P=n(72232),S=n(48947),O=n(7732),I=n(46818),j=n(1082),k=n(38800),C=n(82814),N=n(26722),x=n.n(N),L=n(8442),D=n.n(L),A=n(34172),B=n(35823),Z=n.n(B),F=n(55733),T=n.n(F),_=n(85564),z=n.n(_),R=n(1889),W=n(12405);const J=["","title","appName","version"],U=(e,t,n={})=>{const a=new URLSearchParams;return e&&a.set("url",e),t&&(a.set("github-owner",t.owner),a.set("github-repo",t.repo),a.set("github-content",t.path)),Object.entries(n).forEach((([e,t])=>{t&&a.set(e,`${t}`)})),a.toString()},H=(e,t,n,s,r={},i,o={})=>({selected:r?.[e]?.isSelected||r?.[`parent-${e}`]?.isSelected,cells:[{title:l().createElement(a.Fragment,null,t||n||s?l().createElement(S.Link,{to:`${W.W}/${i}${t&&t[0]&&"v1"!==t[0]?`/${t[0]}`:""}${n||s||Object.values(o).length>0?"?":""}${U(n,s,o)}`},e):e),value:e,props:{value:e,"data-position":"title"}},t?`/api/${i}`:n?{title:l().createElement("span",{className:"ins-c-docs__url"},n.replace(/openapi$/,"").replace(/^http(?:s):\/\//,"")),props:{colSpan:2},value:n}:s?{title:l().createElement(a.Fragment,null,l().createElement($.Button,{variant:"link",isInline:!0,component:"a",icon:l().createElement(D(),null),target:"_blank",rel:"noopener noreferrer",iconPosition:"right",href:`https://github.com/${s.owner}/${s.repo}`},s.owner,"/",s.repo)),props:{colSpan:2},value:s}:"",...n||s?[]:[{title:l().createElement(a.Fragment,null,t?.map?.((e=>l().createElement(S.Link,{key:e,to:`${W.W}/${i}/${e}`},l().createElement(y.Badge,null,e))))),value:t}],{title:l().createElement($.Button,{variant:"plain",onClick:()=>function(e,t,n,a){(0,A.w0)({name:e,version:t,url:n,github:{...a,content:a?.path}}).then((t=>{const n={...t};delete n.latest,delete n.name,Z()(JSON.stringify(n),`${e}-openapi.json`)}))}(i,t?.[0],n,s)}," ",l().createElement(x(),null)," ")}]}),V=[{cells:[{title:l().createElement(C.Z,null,l().createElement(w.Bullseye,null,l().createElement(E.EmptyState,{variant:E.EmptyStateVariant.full},l().createElement(P.Title,{headingLevel:"h5",size:"lg"},"No matching rules found"),l().createElement(E.EmptyStateBody,null,"This filter criteria matches no rules. ",l().createElement("br",null)," Try changing your filter settings.")))),props:{colSpan:4}}]}];var G=n(83215);const K=e=>void 0!==e?.cells[0]?.value,M=({selectedRows:e})=>!e||0===Object.values(e||{}).map((({isSelected:e})=>e)).filter(Boolean).length,Q=(e,t,n=!1)=>n&&0!==Object.keys(e).length?Object.values(t).every?.((({title:t})=>Object.entries(e).find((([e,{isSelected:n}])=>t===e&&n)))):Object.values(t).some?.((({title:t})=>Object.entries(e).find((([e,{isSelected:n}])=>t===e&&n)))),q=()=>{const{isBeta:e,isProd:t}=(0,i.Z)(),n=(0,v.I0)();(0,a.useEffect)((()=>{n((0,h.j3)(e(),t()))}),[]);const y=(0,v.v9)((({services:{loaded:e}})=>e)),w=(0,v.v9)((({services:{selectedRows:e}})=>e)),$=(0,v.v9)((({services:{endpoints:e}})=>e||[])),[E,P]=(0,a.useState)([]),[S,C]=(0,a.useState)({}),[N,x]=(0,a.useState)({perPage:50,page:1}),[L,D]=(0,a.useState)(""),B=L&&$.filter((e=>function(e,t){const n=[e.frontend?.title,...e.frontend?.paths||[],...e.frontend?.sub_apps?.reduce(((e,t)=>[...e,t.title,t.id]),[])||[],e.api?.apiName].filter(Boolean);return J.some((n=>e[n]&&-1!==e[n].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())))||n.some((e=>-1!==e?.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())))}(e,L))),F=y?function(e,{page:t,perPage:n},a,l={},s){if(a.length>0){let r=0;return a.sort(((t,n)=>function(e,t,n="title",a){const l=e=>"appName"===n&&e.apiName?"apiName":n;return a?t[l(t)]?.localeCompare(e[l(e)],"en",{sensitivity:"base"}):e[l(e)]?.localeCompare(t[l(t)],"en",{sensitivity:"base"})}(t,n,J[e.index??0],e.direction===k.B.desc))).slice((t-1)*n,t*n).map((({frontend:e,title:t,appName:n,version:a,apiName:i,api:o},c)=>{const p=[{...H(t,o.versions,o.url,o.github,l,i||n,{readonly:o.readonly}),...o.subItems&&{isTreeOpen:s?.includes?.(e&&e.title||t),subItems:o.subItems},noDetail:!a&&!o.url&&!o.github,posinset:c+1},...o.subItems?Object.entries(o.subItems).map((([e,{title:t,versions:n,url:a,apiName:s,github:i,readonly:o}],c)=>({...H(t,n,a,i,l,s||e,{readonly:o}),treeParent:r,posinset:c+1}))):[]];return r+=o.subItems?Object.keys(o.subItems).length+1:1,p})).flat()}return V}(S,N,B||$,w,E):[],_=F.map((e=>{const t=K(e)?e.cells[0]?.value:void 0,n={isChecked:!!K(e)&&e.selected,isExpanded:E.includes(t),value:t,"aria-setsize":K(e)?Object.keys(e.subItems||{}).length:0,"aria-posinset":K(e)?e.posinset:0,"aria-level":1};if(K(e)&&Object.prototype.hasOwnProperty.call(e,"treeParent")){const t=F[e.treeParent];n["aria-level"]=2,n.isHidden=!!K(t)&&!E.includes(t?.cells?.[0]?.value),n.isChecked=e.selected||t.selected}return K(e)&&!e.selected&&Object.prototype.hasOwnProperty.call(e,"subItems")&&(Q(w,e.subItems,!0)?n.isChecked=!0:Q(w,e.subItems)&&(n.isChecked=null)),{...e,props:n}}));return l().createElement(l().Fragment,null,l().createElement(s.Z,{className:"pf-m-light"},l().createElement(r.Z,{title:"API documentation"})),l().createElement(o.ZP,{className:"ins-c-docs__api"},l().createElement(l().Fragment,null,l().createElement(u.Z,{filterConfig:{items:[{label:"Filter by application name",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Filter by application name",value:L,onChange:(e,t)=>{x({...N,page:1}),D(t)},isDisabled:!y}}]},actionsConfig:{actions:[{label:"Download selected",props:{isDisabled:M({selectedRows:w}),onClick:()=>function(e={},t){const n=new(T()),a=Object.values(e).filter((({isSelected:e})=>e)).map((({appName:e,version:n,apiName:a,subItems:l,url:s,github:r})=>l?Object.entries(l).map((([e,{versions:n,url:a,github:l}])=>(0,A.w0)({name:e,version:n?.[0],url:a,github:l}).catch((()=>t(`API ${e} with version ${n[0]} not found or broken.`))))):(0,A.w0)({name:a||e,version:n,url:s,github:r}).catch((()=>t(`API ${a||e} with version ${n} not found or broken.`)))));Promise.all(z()(a)).then((e=>{if(e&&e.length>1)e.map((e=>{if(e){const{name:t,...a}=e||{};t&&(delete a.latest,n.file(`${t}-openapi.json`,JSON.stringify(a)))}})),n.generateAsync({type:"blob"}).then((e=>Z()(e,"cloud-services-openapi.zip")));else if(e&&1===e.length){const{name:t,...n}=e[0]||{};t&&(delete n.latest,Z()(JSON.stringify(n),`${t}-openapi.json`))}}))}(w,(e=>n((0,G.wN)({variant:"danger",title:"Server error",description:e,dismissable:!0}))))}}]},...y&&{pagination:{...N,itemCount:(B||$).length,onSetPage:(e,t)=>x({...N,page:t}),onPerPageSelect:(e,t)=>x({...N,perPage:t})}},...L.length>0&&{activeFiltersConfig:{filters:[{name:L}],onDelete:()=>{x({...N,page:1}),D("")}}}}),y?l().createElement(g.i,{isTreeTable:!0,className:"pf-m-expandable pf-c-treeview","aria-label":"Sortable Table",canSelectAll:!1,variant:d.B.compact,sortBy:S,onSort:(e,t,n)=>C({index:t,direction:n}),cells:(W=(e,t,n,{props:{value:a}})=>{E.includes(a)?P((()=>E.filter((e=>e!==a)))):P((()=>[...E,a]))},U=(e,t,a)=>{const l=_[a];!t&&Object.prototype.hasOwnProperty.call(l,"subItems")&&n((0,h.wS)({isSelected:t,row:_.filter((({props:{value:e}})=>Object.values(l.subItems).find((({title:t})=>t===e))))})),n((0,h.wS)({isSelected:t,row:l}))},[{title:"Application name",transforms:[O.p],cellTransforms:[...W?[(0,R.G)(W,U)]:[]]},{title:"API endpoint",transforms:[I.P8,O.p,(0,j.d)(10)]},{title:"API version",transforms:[I.P8,O.p,(0,j.d)(10)]},{title:"Download",transforms:[(0,j.d)(10)]}]),rows:_},l().createElement(b.x,null),l().createElement(f.R,null)):l().createElement(c.Z,{columns:["Application name","API endpoints","API version","Download"],numberOfColumns:28})),l().createElement(p.Z,{isFooter:!0},y?l().createElement(m.Pagination,{variant:"bottom",dropDirection:"up",itemCount:(B||$).length,perPage:N.perPage,page:N.page,onSetPage:(e,t)=>x({...N,page:t}),onPerPageSelect:(e,t)=>x({...N,perPage:t})}):"loading")));var W,U}},83471:(e,t,n)=>{"use strict";n.d(t,{IQ:()=>r,j3:()=>s,wS:()=>i});var a=n(20264),l=n(34172);const s=(e,t)=>({type:a.Lh,payload:(0,l.Ux)(e,t)}),r=e=>({type:a.a,payload:(0,l.w0)(e)}),i=e=>({type:a.HM,payload:e})},45467:()=>{},32857:()=>{},28992:()=>{},21626:()=>{},8572:()=>{},98379:()=>{},91993:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},49854:()=>{},87234:()=>{}}]);
//# sourceMappingURL=../sourcemaps/Overview.432ce65898fa49bf5f743f4171304738.js.map