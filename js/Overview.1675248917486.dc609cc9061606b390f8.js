"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[474],{24053:(e,t,n)=>{n.d(t,{W:()=>r});var r="/docs/api"},66702:(e,t,n)=>{n.d(t,{Ux:()=>p,w0:()=>v});var r=n(42982),o=n(4942),i=n(6407),a=n(33366),l=n(47180),c=n(48764).lW;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){return a.ZP.get("".concat(insights.chrome.isBeta()?"/beta":"","/config/main.yml")).then((function(e){return(0,l.zD)(e)})).then((function(e){return{services:Object.keys(e).filter((function(t){return e[t].api})).map((function(t){return s({appName:t},e[t])}))}}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.owner,n=e.repo,r=e.content;return t&&n&&r},v=function(e){var t,n,o=e.name,u=e.version,p=void 0===u?"v1":u,v=e.url,d=e.github,m=f(d)?"https://api.github.com/repos/".concat(d.owner,"/").concat(d.repo,"/contents/").concat(d.content):null!=v?v:(t=o,n=i.u[o]||p,"/".concat(i.K,"/").concat(t,"/").concat(n,"/openapi.json")),b=function(e,t){var n=a.ZP.get(e);return t?n.then((function(e){var t=e.content;return(0,l.zD)(c.from(t,"base64"))})):n}(m,f(d));return b.then((function(e){return s(s({},e),{},{latest:m,name:o,servers:[].concat((0,r.Z)(e.servers||[]),[{url:"/api/".concat(o,"/").concat(i.u[o]||p)}]).filter((function(e,t,n){return n.findIndex((function(t){var n=t.url;return 0==="".concat(location.origin).concat(e.url).indexOf(n)||0===e.url.indexOf(n)}))===t})).map((function(e){return s(s({},e),{},{url:0===e.url.indexOf("/")?"".concat(location.origin).concat(e.url):e.url})}))})}))}},63947:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(87462),o=n(4942),i=n(42982),a=n(70885),l=n(92950),c=n.n(l),u=n(80123),s=n(39173),p=n(14748),f=n(81739),v=n(65550),d=n(48682),m=n(21242),b=n(13678),g=n(86706),h=n(94778),O=n(45987),y=n(83044),w=n(58247),j=n(1657),P=n(83567),S=n(66702),E=n(35823),Z=n.n(E),k=n(55733),I=n.n(k),D=n(85564),C=n.n(D),N=n(24053),x=["name"],L=["name"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=["","title","appName","version"],F=function(e,t){return[{title:"Application name",transforms:[b.sortable],cellTransforms:(0,i.Z)(e?[(0,b.treeRow)(e,t)]:[])},{title:"API endpoint",transforms:[b.nowrap,b.sortable,(0,b.cellWidth)(10)]},{title:"API version",transforms:[b.nowrap,b.sortable,(0,b.cellWidth)(10)]},{title:"Download",transforms:[(0,b.cellWidth)(10)]}]},A=function(e,t,n){var r=new URLSearchParams;return e&&r.set("url",e),t&&(r.set("github-owner",t.owner),r.set("github-repo",t.repo),r.set("github-content",t.path)),Object.entries(n).forEach((function(e){var t=(0,a.Z)(e,2),n=t[0],o=t[1];o&&r.set(n,o)})),r.toString()},W=function(e,t,n,r){var o,a,u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],p=arguments.length>5?arguments[5]:void 0,f=arguments.length>6?arguments[6]:void 0;return{selected:(null==s||null===(o=s[e])||void 0===o?void 0:o.isSelected)||(null==s||null===(a=s["parent-".concat(e)])||void 0===a?void 0:a.isSelected),cells:[{title:c().createElement(l.Fragment,null,t||n||r?c().createElement(y.Link,{to:"".concat(N.W,"/").concat(p).concat(t&&t[0]&&"v1"!==t[0]?"/".concat(t[0]):"").concat(n||r||Object.values(f).length>0?"?":"").concat(A(n,r,f))},e):e),value:e,props:{value:e,"data-position":"title"}},t?"/api/".concat(p):n?{title:c().createElement("span",{className:"ins-c-docs__url"},n.replace(/openapi$/,"").replace(/^http(?:s):\/\//,"")),props:{colSpan:2},value:n}:r?{title:c().createElement(l.Fragment,null,c().createElement(m.Button,{variant:"link",isInline:!0,component:"a",icon:c().createElement(P.ZP,null),target:"_blank",rel:"noopener noreferrer",iconPosition:"right",href:"https://github.com/".concat(r.owner,"/").concat(r.repo)},r.owner,"/",r.repo)),props:{colSpan:2},value:r}:""].concat((0,i.Z)(n||r?[]:[{title:c().createElement(l.Fragment,null,null==t||null===(u=t.map)||void 0===u?void 0:u.call(t,(function(e){return c().createElement(y.Link,{key:e,to:"".concat(N.W,"/").concat(p,"/").concat(e)},c().createElement(m.Badge,null,e))}))),value:t}]),[{title:c().createElement(m.Button,{variant:"plain",onClick:function(){return R(p,null==t?void 0:t[0],n,r)}}," ",c().createElement(j.ZP,null)," ")}])}},z=[{cells:[{title:c().createElement(w.Z,null,c().createElement(m.Bullseye,null,c().createElement(m.EmptyState,{variant:m.EmptyStateVariant.full},c().createElement(m.Title,{headingLevel:"h5",size:"lg"},"No matching rules found"),c().createElement(m.EmptyStateBody,null,"This filter criteria matches no rules. ",c().createElement("br",null)," Try changing your filter settings.")))),props:{colSpan:4}}]}];function R(e,t,n,r){(0,S.w0)({name:e,version:t,url:n,github:_(_({},r),{},{content:null==r?void 0:r.path})}).then((function(t){delete t.latest,delete t.name,Z()(JSON.stringify(t),"".concat(e,"-openapi.json"))}))}var H=n(83215);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){var t=e.selectedRows;return!t||0===Object.values(t||{}).map((function(e){return e.isSelected})).filter(Boolean).length},K=function(e,t){var n,r,o,i,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l&&0!==Object.keys(e).length?null===(o=(i=Object.values(t)).every)||void 0===o?void 0:o.call(i,(function(t){var n=t.title;return Object.entries(e).find((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1].isSelected;return n===r&&o}))})):null===(n=(r=Object.values(t)).some)||void 0===n?void 0:n.call(r,(function(t){var n=t.title;return Object.entries(e).find((function(e){var t=(0,a.Z)(e,2),r=t[0],o=t[1].isSelected;return n===r&&o}))}))};const M=function(){var e=(0,g.I0)();(0,l.useEffect)((function(){e((0,h.j3)())}),[]);var t=(0,g.v9)((function(e){return e.services.loaded})),n=(0,g.v9)((function(e){return e.services.selectedRows})),o=(0,g.v9)((function(e){return e.services.endpoints||[]})),y=(0,l.useState)([]),w=(0,a.Z)(y,2),j=w[0],P=w[1],E=(0,l.useState)({}),k=(0,a.Z)(E,2),D=k[0],N=k[1],T=(0,l.useState)({perPage:50,page:1}),A=(0,a.Z)(T,2),R=A[0],J=A[1],M=(0,l.useState)(""),Q=(0,a.Z)(M,2),$=Q[0],q=Q[1],G=$&&o.filter((function(e){return function(e,t){var n,r,o,a,l,c=[null===(n=e.frontend)||void 0===n?void 0:n.title].concat((0,i.Z)((null===(r=e.frontend)||void 0===r?void 0:r.paths)||[]),(0,i.Z)((null===(o=e.frontend)||void 0===o||null===(a=o.sub_apps)||void 0===a?void 0:a.reduce((function(e,t){return[].concat((0,i.Z)(e),[t.title,t.id])}),[]))||[]),[null===(l=e.api)||void 0===l?void 0:l.apiName]).filter(Boolean);return B.some((function(n){return e[n]&&-1!==e[n].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))||c.some((function(e){return-1!==e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))}(e,$)})),X=t?function(e,t,n,r,o){var l=t.page,c=t.perPage;if(n.length>0){var u=0;return n.sort((function(t,n){return function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",i=function(e){return"appName"===o&&e.apiName?"apiName":o};return(arguments.length>3?arguments[3]:void 0)?null===(n=t[i(t)])||void 0===n?void 0:n.localeCompare(e[i(e)],"en",{sensitivity:"base"}):null===(r=e[i(e)])||void 0===r?void 0:r.localeCompare(t[i(t)],"en",{sensitivity:"base"})}(t,n,B[e.index],e.direction===b.SortByDirection.desc)})).slice((l-1)*c,l*c).map((function(e,t){var n,l=e.frontend,c=e.title,s=e.appName,p=e.version,f=e.apiName,v=e.api,d=[_(_(_({},W(c,v.versions,v.url,v.github,r,f||s,{readonly:v.readonly})),v.subItems&&{isTreeOpen:null==o||null===(n=o.includes)||void 0===n?void 0:n.call(o,l&&l.title||c),subItems:v.subItems}),{},{noDetail:!p&&!v.url&&!v.github,posinset:t+1})].concat((0,i.Z)(v.subItems?Object.entries(v.subItems).map((function(e,t){var n=(0,a.Z)(e,2),o=n[0],i=n[1],l=i.title,c=i.versions,s=i.url,p=i.apiName,f=i.github,v=i.readonly;return _(_({},W(l,c,s,f,r,p||o,{readonly:v})),{},{treeParent:u,posinset:t+1})})):[]));return u+=v.subItems?Object.keys(v.subItems).length+1:1,d})).flat()}return z}(D,R,G||o,n,j):[],Y=X.map((function(e){var t,r=null===(t=e.cells[0])||void 0===t?void 0:t.value,o={isChecked:e.selected,isExpanded:j.includes(r),value:r,"aria-setsize":Object.keys(e.subItems||{}).length,"aria-posinset":e.posinset,"aria-level":1};if(Object.prototype.hasOwnProperty.call(e,"treeParent")){var i,a,l=X[e.treeParent];o["aria-level"]=2,o.isHidden=!j.includes(null==l||null===(i=l.cells)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.value),o.isChecked=e.selected||l.selected}return!e.selected&&Object.prototype.hasOwnProperty.call(e,"subItems")&&(K(n,e.subItems,!0)?o.isChecked=!0:K(n,e.subItems)&&(o.isChecked=null)),U(U({},e),{},{props:o})}));return c().createElement(c().Fragment,null,c().createElement(u.Z,{className:"pf-m-light"},c().createElement(s.Z,{title:"API documentation"})),c().createElement(p.Z,{className:"ins-c-docs__api"},c().createElement(c().Fragment,null,c().createElement(d.Z,(0,r.Z)({filterConfig:{items:[{label:"Filter by application name",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Filter by application name",value:$,onChange:function(e,t){J(U(U({},R),{},{page:1})),q(t)},isDisabled:!t}}]},actionsConfig:{actions:[{label:"Download selected",props:{isDisabled:V({selectedRows:n}),onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new(I()),r=Object.values(e).filter((function(e){return e.isSelected})).map((function(e){var n=e.appName,r=e.version,o=e.apiName,i=e.subItems,l=e.url,c=e.github;return i?Object.entries(i).map((function(e){var n=(0,a.Z)(e,2),r=n[0],o=n[1],i=o.versions,l=o.url,c=o.github;return(0,S.w0)({name:r,version:null==i?void 0:i[0],url:l,github:c}).catch((function(){return t("API ".concat(r," with version ").concat(i[0]," not found or broken."))}))})):(0,S.w0)({name:o||n,version:r,url:l,github:c}).catch((function(){return t("API ".concat(o||n," with version ").concat(r," not found or broken."))}))}));Promise.all(C()(r)).then((function(e){if(e&&e.length>1)e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=(0,O.Z)(e,x);t&&(delete r.latest,n.file("".concat(t,"-openapi.json"),JSON.stringify(r)))})),n.generateAsync({type:"blob"}).then((function(e){return Z()(e,"cloud-services-openapi.zip")}));else if(e&&1===e.length){var t=e[0]||{},r=t.name,o=(0,O.Z)(t,L);r&&(delete o.latest,Z()(JSON.stringify(o),"".concat(r,"-openapi.json")))}}))}(n,(function(t){return e((0,H.wN)({variant:"danger",title:"Server error",description:t,dismissable:!0}))}))}}}]}},t&&{pagination:U(U({},R),{},{itemCount:(G||o).length,onSetPage:function(e,t){return J(U(U({},R),{},{page:t}))},onPerPageSelect:function(e,t){return J(U(U({},R),{},{perPage:t}))}})},$.length>0&&{activeFiltersConfig:{filters:[{name:$}],onDelete:function(){J(U(U({},R),{},{page:1})),q("")}}})),t?c().createElement(b.Table,{isTreeTable:!0,className:"pf-m-expandable pf-c-treeview","aria-label":"Sortable Table",canSelectAll:!1,variant:b.TableVariant.compact,sortBy:D,onSort:function(e,t,n){return N({index:t,direction:n})},cells:F((function(e,t,n,r){var o=r.props.value;j.includes(o)?P((function(){return j.filter((function(e){return e!==o}))})):P((function(){return[].concat((0,i.Z)(j),[o])}))}),(function(t,n,r){var o=Y[r];!n&&Object.prototype.hasOwnProperty.call(o,"subItems")&&e((0,h.wS)({isSelected:n,row:Y.filter((function(e){var t=e.props.value;return Object.values(o.subItems).find((function(e){return e.title===t}))}))})),e((0,h.wS)({isSelected:n,row:o}))})),rows:Y},c().createElement(b.TableHeader,null),c().createElement(b.TableBody,null)):c().createElement(f.Z,{columns:F(),rowSize:28})),c().createElement(v.Z,{isFooter:!0},t?c().createElement(m.Pagination,{variant:"bottom",dropDirection:"up",itemCount:(G||o).length,perPage:R.perPage,page:R.page,onSetPage:function(e,t){return J(U(U({},R),{},{page:t}))},onPerPageSelect:function(e,t){return J(U(U({},R),{},{perPage:t}))}}):"loading")))}},94778:(e,t,n)=>{n.d(t,{IQ:()=>a,j3:()=>i,wS:()=>l});var r=n(49120),o=n(66702),i=function(){return{type:r.Lh,payload:(0,o.Ux)()}},a=function(e){return{type:r.a,payload:(0,o.w0)(e)}},l=function(e){return{type:r.HM,payload:e}}}}]);
//# sourceMappingURL=../sourcemaps/Overview.4ea968ac0b68c8293b1f3dbe908e2e54.js.map