"use strict";(self.webpackChunkinsights_frontend_starter_app=self.webpackChunkinsights_frontend_starter_app||[]).push([[4474],{66702:(e,t,n)=>{n.d(t,{Ux:()=>p,w0:()=>m});var r=n(42982),o=n(4942),a=n(6407),i=n(33366),c=n(47180),l=n(48764).Buffer;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){return i.ZP.get("".concat(insights.chrome.isBeta()?"/beta":"","/config/main.yml")).then((function(e){return(0,c.zD)(e)})).then((function(e){return{services:Object.keys(e).filter((function(t){return e[t].api})).map((function(t){return s({appName:t},e[t])}))}}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.owner,n=e.repo,r=e.content;return t&&n&&r},m=function(e){var t,n,o=e.name,u=e.version,p=void 0===u?"v1":u,m=e.url,v=e.github,d=f(v)?"https://api.github.com/repos/".concat(v.owner,"/").concat(v.repo,"/contents/").concat(v.content):null!=m?m:(t=o,n=a.u[o]||p,"/".concat(a.K,"/").concat(t,"/").concat(n,"/openapi.json")),g=function(e,t){var n=i.ZP.get(e);return t?n.then((function(e){var t=e.content;return(0,c.zD)(l.from(t,"base64"))})):n}(d,f(v));return g.then((function(e){return s(s({},e),{},{latest:d,name:o,servers:[].concat((0,r.Z)(e.servers||[]),[{url:"/api/".concat(o,"/").concat(a.u[o]||p)}]).filter((function(e,t,n){return n.findIndex((function(t){var n=t.url;return 0==="".concat(location.origin).concat(e.url).indexOf(n)||0===e.url.indexOf(n)}))===t})).map((function(e){return s(s({},e),{},{url:0===e.url.indexOf("/")?"".concat(location.origin).concat(e.url):e.url})}))})}))}},63947:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(87462),o=n(4942),a=n(42982),i=n(70885),c=n(46759),l=n.n(c),u=n(80123),s=n(39173),p=n(14748),f=n(81739),m=n(65550),v=n(48682),d=n(81557),g=n(79863),b=n(27174),h=n(31267),y=n(86706),O=n(94778),w=n(45987),P=n(55159),j=n(58247),E=n(1657),S=n(83567),Z=n(66702),D=n(35823),N=n.n(D),k=n(55733),C=n.n(k),I=n(85564),x=n.n(I),B=n(18959),L=["name"],_=["name"];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=["","title","appName","version"],z=function(e){return[{title:"Application name",transforms:[h.sortable],cellTransforms:[(0,B.Z)(e)]},{title:"API endpoint",transforms:[h.nowrap,h.sortable,(0,h.cellWidth)(10)]},{title:"API version",transforms:[h.nowrap,h.sortable,(0,h.cellWidth)(10)]},{title:"Download",transforms:[(0,h.cellWidth)(10)]}]},W=function(e,t,n,r){var o,i,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5?arguments[5]:void 0;return{selected:null==u||null===(o=u[e])||void 0===o?void 0:o.isSelected,cells:[{title:l().createElement(c.Fragment,null,t||n||r?l().createElement(P.Link,{to:"/".concat(s).concat(t&&t[0]&&"v1"!==t[0]?"/".concat(t[0]):"").concat(n||r?"?":"").concat(n?"url=".concat(n):"").concat(r?"github-owner=".concat(r.owner,"&github-repo=").concat(r.repo,"&github-content=").concat(r.path):"")},e):e),value:e,props:{value:e,"data-position":"title"}},t?"/api/".concat(s):n?{title:l().createElement("span",{className:"ins-c-docs__url"},n.replace(/openapi$/,"").replace(/^http(?:s):\/\//,"")),props:{colSpan:2},value:n}:r?{title:l().createElement(c.Fragment,null,l().createElement(b.Button,{variant:"link",isInline:!0,component:"a",icon:l().createElement(S.ZP,null),target:"_blank",rel:"noopener noreferrer",iconPosition:"right",href:"https://github.com/".concat(r.owner,"/").concat(r.repo)},r.owner,"/",r.repo)),props:{colSpan:2},value:r}:""].concat((0,a.Z)(n||r?[]:[{title:l().createElement(c.Fragment,null,null==t||null===(i=t.map)||void 0===i?void 0:i.call(t,(function(e){return l().createElement(P.Link,{key:e,to:"/".concat(s,"/").concat(e)},l().createElement(b.Badge,null,e))}))),value:t}]),[{title:l().createElement(b.Button,{variant:"plain",onClick:function(){return R(s,null==t?void 0:t[0],n,r)}}," ",l().createElement(E.ZP,null)," ")}])}},J=[{cells:[{title:l().createElement(j.Z,null,l().createElement(b.Bullseye,null,l().createElement(b.EmptyState,{variant:b.EmptyStateVariant.full},l().createElement(b.Title,{headingLevel:"h5",size:"lg"},"No matching rules found"),l().createElement(b.EmptyStateBody,null,"This filter criteria matches no rules. ",l().createElement("br",null)," Try changing your filter settings.")))),props:{colSpan:4}}]}];function R(e,t,n,r){(0,Z.w0)({name:e,version:t,url:n,github:F(F({},r),{},{content:r.path})}).then((function(t){delete t.latest,delete t.name,N()(JSON.stringify(t),"".concat(e,"-openapi.json"))}))}var V=n(83215);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.selectedRows;return!t||0===Object.values(t||{}).map((function(e){return e.isSelected})).filter(Boolean).length};const M=function(){var e=(0,y.I0)();(0,c.useEffect)((function(){e((0,O.j3)())}),[]);var t=(0,y.v9)((function(e){return e.services.loaded})),n=(0,y.v9)((function(e){return e.services.selectedRows})),o=(0,y.v9)((function(e){return e.services.endpoints||[]})),P=(0,c.useState)([]),j=(0,i.Z)(P,2),E=j[0],S=j[1],D=(0,c.useState)({}),k=(0,i.Z)(D,2),I=k[0],B=k[1],T=(0,c.useState)({perPage:50,page:1}),R=(0,i.Z)(T,2),H=R[0],M=R[1],Q=(0,c.useState)(""),$=(0,i.Z)(Q,2),q=$[0],G=$[1],X=q&&o.filter((function(e){return function(e,t){var n,r,o,i,c,l=[null===(n=e.frontend)||void 0===n?void 0:n.title].concat((0,a.Z)((null===(r=e.frontend)||void 0===r?void 0:r.paths)||[]),(0,a.Z)((null===(o=e.frontend)||void 0===o||null===(i=o.sub_apps)||void 0===i?void 0:i.reduce((function(e,t){return[].concat((0,a.Z)(e),[t.title,t.id])}),[]))||[]),[null===(c=e.api)||void 0===c?void 0:c.apiName]).filter(Boolean);return A.some((function(n){return e[n]&&-1!==e[n].toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))||l.some((function(e){return-1!==e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}))}(e,q)})),Y=t?function(e,t,n,r,o){var c=t.page,l=t.perPage;return n.length>0?n.sort((function(t,n){return function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title",a=function(e){return"appName"===o&&e.apiName?"apiName":o};return(arguments.length>3?arguments[3]:void 0)?null===(n=t[a(t)])||void 0===n?void 0:n.localeCompare(e[a(e)],"en",{sensitivity:"base"}):null===(r=e[a(e)])||void 0===r?void 0:r.localeCompare(t[a(t)],"en",{sensitivity:"base"})}(t,n,A[e.index],e.direction===h.SortByDirection.desc)})).slice((c-1)*l,c*l).map((function(e,t){var n,c=e.frontend,l=e.title,u=e.appName,s=e.version,p=e.apiName,f=e.api;return[F(F(F({},W(l,f.versions,f.url,f.github,r,p||u)),f.subItems&&{isTreeOpen:null==o||null===(n=o.includes)||void 0===n?void 0:n.call(o,c&&c.title||l),subItems:f.subItems}),{},{noDetail:!s&&!f.url&&!f.github})].concat((0,a.Z)(f.subItems?Object.entries(f.subItems).map((function(e){var n=(0,i.Z)(e,2),o=n[0],a=n[1],c=a.title,l=a.versions,u=a.url,s=a.apiName,p=a.github;return F(F({},W(c,l,u,p,r,s||o)),{},{treeParent:t})})):[]))})).flat():J}(I,H,X||o,n,E):[];return l().createElement(l().Fragment,null,l().createElement(u.Z,{className:"pf-m-light"},l().createElement(s.Z,{title:"API documentation"})),l().createElement(p.Z,{className:"ins-c-docs__api"},l().createElement(l().Fragment,null,l().createElement(v.Z,(0,r.Z)({filterConfig:{items:[{label:"Filter by application name",type:"text",filterValues:{id:"filter-by-string",key:"filter-by-string",placeholder:"Filter by application name",value:q,onChange:function(e,t){M(U(U({},H),{},{page:1})),G(t)},isDisabled:!t}}]},actionsConfig:{actions:[{label:"Download selected",props:{isDisabled:K({selectedRows:n}),onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new(C()),r=Object.values(e).filter((function(e){return e.isSelected})).map((function(e){var n=e.appName,r=e.version,o=e.apiName,a=e.subItems,c=e.url,l=e.github;return a?Object.entries(a).map((function(e){var n=(0,i.Z)(e,2),r=n[0],o=n[1],a=o.versions,c=o.url,l=o.github;return(0,Z.w0)({name:r,version:null==a?void 0:a[0],url:c,github:l}).catch((function(){return t("API ".concat(r," with version ").concat(a[0]," not found or broken."))}))})):(0,Z.w0)({name:o||n,version:r,url:c,github:l}).catch((function(){return t("API ".concat(o||n," with version ").concat(r," not found or broken."))}))}));Promise.all(x()(r)).then((function(e){if(e&&e.length>1)e.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=(0,w.Z)(e,L);t&&(delete r.latest,n.file("".concat(t,"-openapi.json"),JSON.stringify(r)))})),n.generateAsync({type:"blob"}).then((function(e){return N()(e,"cloud-services-openapi.zip")}));else if(e&&1===e.length){var t=e[0]||{},r=t.name,o=(0,w.Z)(t,_);r&&(delete o.latest,N()(JSON.stringify(o),"".concat(r,"-openapi.json")))}}))}(n,(function(t){return e((0,V.wN)({variant:"danger",title:"Server error",description:t,dismissable:!0}))}))}}}]}},t&&{pagination:U(U({},H),{},{itemCount:(X||o).length,onSetPage:function(e,t){return M(U(U({},H),{},{page:t}))},onPerPageSelect:function(e,t){return M(U(U({},H),{},{perPage:t}))}})},q.length>0&&{activeFiltersConfig:{filters:[{name:q}],onDelete:function(){M(U(U({},H),{},{page:1})),G("")}}})),t?l().createElement(h.Table,(0,r.Z)({className:"pf-m-expandable pf-c-treeview","aria-label":"Sortable Table",variant:h.TableVariant.compact,sortBy:I,onSort:function(e,t,n){return B({index:t,direction:n})},cells:z((function(e,t){var n=t.props.value;E.includes(n)?S((function(){return E.filter((function(e){return e!==n}))})):S((function(){return[].concat((0,a.Z)(E),[n])}))})),rows:(0,d.t)(Y),rowWrapper:g.Z},(X||o).length>0&&{onSelect:function(t,n,r){e(-1===r?(0,O.wS)({isSelected:n,row:Y}):(0,O.wS)({isSelected:n,row:Y[r]}))}}),l().createElement(h.TableHeader,null),l().createElement(h.TableBody,null)):l().createElement(f.Z,{columns:z,rowSize:28})),l().createElement(m.Z,{isFooter:!0},t?l().createElement(b.Pagination,{variant:"bottom",dropDirection:"up",itemCount:(X||o).length,perPage:H.perPage,page:H.page,onSetPage:function(e,t){return M(U(U({},H),{},{page:t}))},onPerPageSelect:function(e,t){return M(U(U({},H),{},{perPage:t}))}}):"loading")))}},94778:(e,t,n)=>{n.d(t,{IQ:()=>i,j3:()=>a,wS:()=>c});var r=n(49120),o=n(66702),a=function(){return{type:r.Lh,payload:(0,o.Ux)()}},i=function(e){return{type:r.a,payload:(0,o.w0)(e)}},c=function(e){return{type:r.HM,payload:e}}}}]);
//# sourceMappingURL=../sourcemaps/Overview.d2a4988f164b10bcd69c3e5641e17b1d.js.map